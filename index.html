<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Scrappy : Vizhuds!" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/css/master.css">    

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
    <!--[if lte IE 8]>
       <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.ie.css" />
    <![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
    <title>Scrappy</title>
  </head>

  <body>

    <!-- HEADER -->
    <div class="header-wrapper">
        <header class="row twelve">
          <a href="" class="logo">          
            <img src="assets/images/logo.png" />
          </a>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div class="row twelve main-content">

    <section class="left-col columns four">

      <div id="neigborhoodList" class="">
          <ul>
              <li><a href="#">Downtown</a></li>
              <li><a href="#">Uptown</a></li>
              <li><a href="#">Downtown</a></li>
              <li><a href="#">Downtown</a></li>
              <li><a href="#">Downtown</a></li>
          </ul>
      </div>

    </section>

    <section class="right-col columns eight">
      
    <h3>You're at Scrappy Neighborhood</h3>
        
        <div id="map" style="width: 800px; height: 600px"></div>
        <script src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
        <script>
          var map = new L.Map('map', {
            center: new L.LatLng(44.9616, -93.1729),
            zoom: 11,
            layers: new L.TileLayer('http://a.tiles.mapbox.com/v3/unsay.map-yh392617/{z}/{x}/{y}.png')
           });
	   
	   $(document).ready(function() {

	     function rando() {
	       return '#' + (function co(lor){   return (lor +=
	       [0,1,2,3,4,5,6,7,8,9,'a','b','c','d','e','f'][Math.floor(Math.random()*16)])
	       && (lor.length == 6) ?  lor : co(lor); })('');
	     }

  	   function style(feature) {
		   return {
			   fillColor: rando(),
			   weight: 2,
			   opacity: 1,
			   color: 'white',
			   dashArray: '3',
			   fillOpacity: 0.7
		   }
	   }  

      function highlightFeature(e) {
          var layer = e.target;

          layer.setStyle({
              weight: 5,
              color: '#666',
              dashArray: '',
              fillOpacity: 0.7
          });

          if (!L.Browser.ie && !L.Browser.opera) {
             layer.bringToFront();
          }
      }

	   function makeList(data) {
		   $('#neigborhoodList').html('');
		   $(data.features).each(function(index, ele) {
			   $('#neigborhoodList').append('<li><a href="#">'+ele.properties.BDNAME+'</a></li>');
		   });
	   }

      function onEachFeature(feature, layer) {
          layer.on({
              mouseover: highlightFeature,
              mouseout: resetHighlight,
              click: zoomToFeature
          });
      }

      function zoomToFeature(e) {
          map.fitBounds(e.target.getBounds());
      }

      function resetHighlight(e) {
          geojson.resetStyle(e.target);
      }

     function makeAttributeList(data) {
       $(data).each(function(index, ele) {
         //console.log(ele);
       });
     };
   
     $.get("data/neighborhoods.json", function(data) {
       makeAttributeList(data);
     });
	   
     $.get("data/minneapolis.json", function(data) {
      //When GeoJSON is loaded
		  var geojsonLayer = new L.GeoJSON(data, {
        style: style,
        onEachFeature: onEachFeature,
      });   //New GeoJSON layer
		  map.addLayer(geojsonLayer);     //Add layer to map  
		  makeList(data);
     });
    });
    </script>
    </section>
    
    </div>  <!-- end main content --> 

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Scrappy maintained by <a href="https://github.com/martindavis">martindavis</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
